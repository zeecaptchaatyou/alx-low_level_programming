More problems on functions and nested loops in C